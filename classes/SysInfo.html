<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: SysInfo [SysInfo: All your system-independent infoz in one handy class.]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <div class='name'>
          <span class='type'>Class</span>
          SysInfo
        </div>
        <ol class='paths'>
          <li>
            <a href="../files/lib/sysinfo_rb.html">lib/sysinfo.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Storable</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <h1><a href="SysInfo.html">SysInfo</a></h1>
            <p>
            A container for the platform specific system information. Portions of this
            code were originally from Amazon&#8217;s EC2 AMI tools, specifically
            lib/platform.rb.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000001">new</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000004">find_hostname</a></li>
              <li><a href="#M000006">find_ipaddress_internal</a></li>
              <li><a href="#M000003">find_network_info</a></li>
              <li><a href="#M000002">find_platform_info</a></li>
              <li><a href="#M000005">find_uptime</a></li>
              <li><a href="#M000010">home</a></li>
              <li><a href="#M000009">paths</a></li>
              <li><a href="#M000007">platform</a></li>
              <li><a href="#M000011">shell</a></li>
              <li><a href="#M000012">tmpdir</a></li>
              <li><a href="#M000008">to_s</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>VERSION</td>
                    <td>=</td>
                    <td class='context-item-value'>&quot;0.7.3&quot;.freeze</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>IMPLEMENTATIONS</td>
                    <td>=</td>
                    <td class='context-item-value'>[            # These are for JRuby, System.getproperty('os.name').        # For a list of all values, see: http://lopica.sourceforge.net/os.html              #regexp matcher       os        implementation       [/mac\s*os\s*x/i,     :unix,    :osx              ],         [/sunos/i,            :unix,    :solaris          ],        [/windows\s*ce/i,     :windows, :wince            ],       [/windows/i,          :windows, :windows          ],         [/osx/i,              :unix,    :osx              ],              # These are for RUBY_PLATFORM and JRuby       [/java/i,             :java,    :java             ],       [/darwin/i,           :unix,    :osx              ],       [/linux/i,            :unix,    :linux            ],       [/freebsd/i,          :unix,    :freebsd          ],       [/netbsd/i,           :unix,    :netbsd           ],       [/solaris/i,          :unix,    :solaris          ],       [/irix/i,             :unix,    :irix             ],       [/cygwin/i,           :unix,    :cygwin           ],       [/mswin/i,            :windows, :windows          ],       [/djgpp/i,            :windows, :djgpp            ],       [/mingw/i,            :windows, :mingw            ],       [/bccwin/i,           :windows, :bccwin           ],       [/wince/i,            :windows, :wince            ],       [/vms/i,              :vms,     :vms              ],       [/os2/i,              :os2,     :os2              ],       [nil,                 :unknown, :unknown          ],     ].freeze</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ARCHITECTURES</td>
                    <td>=</td>
                    <td class='context-item-value'>[       [/(i\d86)/i,  :x86              ],       [/x86_64/i,   :x86_64           ],       [/x86/i,      :x86              ],  # JRuby       [/ia64/i,     :ia64             ],       [/alpha/i,    :alpha            ],       [/sparc/i,    :sparc            ],       [/mips/i,     :mips             ],       [/powerpc/i,  :powerpc          ],       [/universal/i,:x86_64           ],       [nil,         :unknown          ],     ].freeze</td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='aliases-list'>
              <h2>External Aliases</h2>
              <div class='name-list'>
                <table summary='External aliases'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>impl</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'>implementation</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>arch</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'>architecture</td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000001'>
                <a name='M000001'>      </a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000001-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000001-source'>    <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 77</span>&#x000A;77:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>&#x000A;78:     <span class="ruby-ivar">@vm</span>, <span class="ruby-ivar">@os</span>, <span class="ruby-ivar">@impl</span>, <span class="ruby-ivar">@arch</span> = <span class="ruby-identifier">find_platform_info</span>&#x000A;79:     <span class="ruby-ivar">@hostname</span>, <span class="ruby-ivar">@ipaddress_internal</span>, <span class="ruby-ivar">@uptime</span> = <span class="ruby-identifier">find_network_info</span>&#x000A;80:     <span class="ruby-ivar">@ruby</span> = <span class="ruby-constant">RUBY_VERSION</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_i</span> }&#x000A;81:     <span class="ruby-ivar">@user</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'USER'</span>]&#x000A;82:     <span class="ruby-identifier">require</span> <span class="ruby-value str">'Win32API'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@os</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:windows</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@vm</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:ruby</span>&#x000A;83:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000004'>
                <a name='M000004'>      </a>
                <div class='synopsis'>
                  <span class='name'>find_hostname</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Return the hostname for the local machine
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000004-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000004-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 114</span>&#x000A;114:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_hostname</span>; <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">gethostname</span>; <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000006'>
                <a name='M000006'>      </a>
                <div class='synopsis'>
                  <span class='name'>find_ipaddress_internal</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Return the local IP address which receives external traffic from: <a
                  href="http://coderrr.wordpress.com/2008/05/28/get-your-local-ip-address">coderrr.wordpress.com/2008/05/28/get-your-local-ip-address</a>/
                  NOTE: This <em>does not</em> open a connection to the IP address.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000006-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000006-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 135</span>&#x000A;135:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_ipaddress_internal</span>&#x000A;136:     <span class="ruby-comment cmt"># turn off reverse DNS resolution temporarily </span>&#x000A;137:     <span class="ruby-identifier">orig</span>, <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span>, <span class="ruby-keyword kw">true</span>   &#x000A;138:     <span class="ruby-constant">UDPSocket</span>.<span class="ruby-identifier">open</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-value str">'65.74.177.129'</span>, <span class="ruby-value">1</span>); <span class="ruby-identifier">s</span>.<span class="ruby-identifier">addr</span>.<span class="ruby-identifier">last</span> } <span class="ruby-comment cmt"># GitHub IP</span>&#x000A;139:   <span class="ruby-keyword kw">ensure</span>  &#x000A;140:     <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span> = <span class="ruby-identifier">orig</span>&#x000A;141:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000003'>
                <a name='M000003'>      </a>
                <div class='synopsis'>
                  <span class='name'>find_network_info</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns [hostname, ipaddr (internal), uptime]
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000003-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000003-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 102</span>&#x000A;102:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_network_info</span>&#x000A;103:     <span class="ruby-identifier">hostname</span>, <span class="ruby-identifier">ipaddr</span>, <span class="ruby-identifier">uptime</span> = <span class="ruby-identifier">:unknown</span>, <span class="ruby-identifier">:unknown</span>, <span class="ruby-identifier">:unknown</span>&#x000A;104:     <span class="ruby-keyword kw">begin</span>&#x000A;105:       <span class="ruby-identifier">hostname</span> = <span class="ruby-identifier">find_hostname</span>&#x000A;106:       <span class="ruby-identifier">ipaddr</span> = <span class="ruby-identifier">find_ipaddress_internal</span>&#x000A;107:       <span class="ruby-identifier">uptime</span> = <span class="ruby-identifier">find_uptime</span>       &#x000A;108:     <span class="ruby-keyword kw">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span> <span class="ruby-comment cmt"># Be silent!</span>&#x000A;109:     <span class="ruby-keyword kw">end</span>&#x000A;110:     [<span class="ruby-identifier">hostname</span>, <span class="ruby-identifier">ipaddr</span>, <span class="ruby-identifier">uptime</span>]&#x000A;111:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000002'>
                <a name='M000002'>      </a>
                <div class='synopsis'>
                  <span class='name'>find_platform_info</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns [vm, os, impl, arch]
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000002-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000002-source'>    <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 86</span>&#x000A;86:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_platform_info</span>&#x000A;87:     <span class="ruby-identifier">vm</span>, <span class="ruby-identifier">os</span>, <span class="ruby-identifier">impl</span>, <span class="ruby-identifier">arch</span> = <span class="ruby-identifier">:ruby</span>, <span class="ruby-identifier">:unknown</span>, <span class="ruby-identifier">:unknown</span>, <span class="ruby-identifier">:unknow</span>&#x000A;88:     <span class="ruby-constant">IMPLEMENTATIONS</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span>, <span class="ruby-identifier">o</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>&#x000A;89:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">RUBY_PLATFORM</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">r</span>&#x000A;90:       <span class="ruby-identifier">os</span>, <span class="ruby-identifier">impl</span> = [<span class="ruby-identifier">o</span>, <span class="ruby-identifier">i</span>]&#x000A;91:       <span class="ruby-keyword kw">break</span>&#x000A;92:     <span class="ruby-keyword kw">end</span>&#x000A;93:     <span class="ruby-constant">ARCHITECTURES</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span>, <span class="ruby-identifier">a</span><span class="ruby-operator">|</span>&#x000A;94:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">RUBY_PLATFORM</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">r</span>&#x000A;95:       <span class="ruby-identifier">arch</span> = <span class="ruby-identifier">a</span>&#x000A;96:       <span class="ruby-keyword kw">break</span>&#x000A;97:     <span class="ruby-keyword kw">end</span>&#x000A;98:     <span class="ruby-identifier">os</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:java</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">guess_java</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">vm</span>, <span class="ruby-identifier">os</span>, <span class="ruby-identifier">impl</span>, <span class="ruby-identifier">arch</span>]&#x000A;99:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000005'>
                <a name='M000005'>      </a>
                <div class='synopsis'>
                  <span class='name'>find_uptime</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the local uptime in hours. Use Win32API in Windows, &#8216;sysctl
                  -b kern.boottime&#8217; os osx, and &#8216;who -b&#8217; on unix. Based on
                  Ruby Quiz solutions by: Matthias Reitinger On Windows, see also: net
                  statistics server
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000005-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000005-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 120</span>&#x000A;120:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_uptime</span>&#x000A;121:     <span class="ruby-identifier">hours</span> = <span class="ruby-value">0</span>&#x000A;122:     <span class="ruby-keyword kw">begin</span>&#x000A;123:       <span class="ruby-identifier">seconds</span> = <span class="ruby-identifier">execute_platform_specific</span>(<span class="ruby-value str">&quot;find_uptime&quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-value">0</span>&#x000A;124:       <span class="ruby-identifier">hours</span> = <span class="ruby-identifier">seconds</span> <span class="ruby-operator">/</span> <span class="ruby-value">3600</span> <span class="ruby-comment cmt"># seconds to hours</span>&#x000A;125:     <span class="ruby-keyword kw">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;126:       <span class="ruby-comment cmt">#puts ex.message  # TODO: implement debug?</span>&#x000A;127:     <span class="ruby-keyword kw">end</span>&#x000A;128:     <span class="ruby-identifier">hours</span>&#x000A;129:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000010'>
                <a name='M000010'>      </a>
                <div class='synopsis'>
                  <span class='name'>home</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the path to the current user&#8217;s home directory
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000010-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000010-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 158</span>&#x000A;158:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">home</span>; <span class="ruby-identifier">execute_platform_specific</span>(<span class="ruby-identifier">:home</span>); <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000009'>
                <a name='M000009'>      </a>
                <div class='synopsis'>
                  <span class='name'>paths</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the environment paths as an Array
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000009-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000009-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 156</span>&#x000A;156:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">paths</span>; <span class="ruby-identifier">execute_platform_specific</span>(<span class="ruby-identifier">:paths</span>); <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000007'>
                <a name='M000007'>      </a>
                <div class='synopsis'>
                  <span class='name'>platform</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a Symbol of the short platform descriptor in the format: VM-OS e.g.
                  <tt>:java-unix</tt>
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000007-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000007-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 145</span>&#x000A;145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">platform</span>&#x000A;146:     <span class="ruby-node">&quot;#{@vm}-#{@os}&quot;</span>.<span class="ruby-identifier">to_sym</span>&#x000A;147:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000011'>
                <a name='M000011'>      </a>
                <div class='synopsis'>
                  <span class='name'>shell</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the name of the current shell
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000011-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000011-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 160</span>&#x000A;160:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shell</span>; <span class="ruby-identifier">execute_platform_specific</span>(<span class="ruby-identifier">:shell</span>); <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000012'>
                <a name='M000012'>      </a>
                <div class='synopsis'>
                  <span class='name'>tmpdir</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the path to the current temp directory
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000012-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000012-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 162</span>&#x000A;162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tmpdir</span>; <span class="ruby-identifier">execute_platform_specific</span>(<span class="ruby-identifier">:tmpdir</span>); <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000008'>
                <a name='M000008'>      </a>
                <div class='synopsis'>
                  <span class='name'>to_s</span>
                  <span class='arguments'>(*args)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a String of the full platform descriptor in the format:
                  VM-OS-IMPL-ARCH e.g. <tt>java-unix-osx-x86_64</tt>
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000008-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000008-source'>     <span class="ruby-comment cmt"># File lib/sysinfo.rb, line 151</span>&#x000A;151:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)&#x000A;152:     <span class="ruby-node">&quot;#{@vm}-#{@os}-#{@impl}-#{@arch}&quot;</span>.<span class="ruby-identifier">to_sym</span>&#x000A;153:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
